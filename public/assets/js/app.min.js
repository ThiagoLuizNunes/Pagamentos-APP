"use strict";angular.module("primeiraApp",["ui.router","ngAnimate","toastr"]);
"use strict";!function(){function n(n,o,t){var r=this;r.loginMode=!0,r.changeMode=function(){return r.loginMode=!r.loginMode},r.login=function(){t.login(r.user,function(t){return t?o.addError(t):n.path("/")})},r.signup=function(){t.signup(r.user,function(t){return t?o.addError(t):n.path("/")})},r.getUser=function(){return t.getUser()},r.logout=function(){t.logout(function(){return n.path("/")})}}angular.module("primeiraApp").controller("AuthCtrl",["$location","msgs","auth",n])}();
"use strict";!function(){function a(a,e,o,t){var c=this,i="http://localhost:3003/api/cicloPagamento";c.refresh=function(){var o=parseInt(e.search().page)||1;a.get(i+"?skip="+10*(o-1)+"&limit=10").then(function(e){c.cicloPagamento={creditos:[{}],debitos:[{}]},c.cicloPagamentos=e.data,c.calculateValues(),a.get(i+"/count").then(function(a){c.pages=Math.ceil(a.data.value/10),t.show(c,{tabList:!0,tabCreate:!0})})})},c.create=function(){a.post(i,c.cicloPagamento).then(function(a){c.cicloPagamento={},c.refresh(),o.addSuccess("Operação realizada com sucesso!!")}).catch(function(a){o.addError(a.data.errors)})},c.update=function(){var e=i+"/"+c.cicloPagamento._id;a.put(e,c.cicloPagamento).then(function(a){c.refresh(),o.addSuccess("Operação realizada com sucesso!")}).catch(function(a){o.addError(a.data.errors)})},c.delete=function(){var e=i+"/"+c.cicloPagamento._id;a.delete(e,c.cicloPagamento).then(function(a){c.refresh(),o.addSuccess("Operação realizada com sucesso!")}).catch(function(a){o.addError(a.data.errors)})},c.showTabUpdate=function(a){c.cicloPagamento=a,c.calculateValues(),t.show(c,{tabUpdate:!0})},c.showTabDelete=function(a){c.cicloPagamento=a,c.calculateValues(),t.show(c,{tabDelete:!0})},c.addCredito=function(a){c.cicloPagamento.creditos.splice(a+1,0,{})},c.cloneCredito=function(a,e){var o=e.nome,t=e.valor;c.cicloPagamento.creditos.splice(a+1,0,{nome:o,valor:t}),c.calculateValues()},c.deleteCredito=function(a){c.cicloPagamento.creditos.length>1&&(c.cicloPagamento.creditos.splice(a,1),c.calculateValues())},c.addDebito=function(a){c.cicloPagamento.debitos.splice(a+1,0,{})},c.cloneDebito=function(a,e){var o=e.nome,t=e.valor,i=e.status;c.cicloPagamento.debitos.splice(a+1,0,{nome:o,valor:t,status:i}),c.calculateValues()},c.deleteDebito=function(a){c.cicloPagamento.debitos.length>1&&(c.cicloPagamento.debitos.splice(a,1),c.calculateValues())},c.calculateValues=function(){c.credito=0,c.debito=0,c.cicloPagamento&&(c.cicloPagamento.creditos.forEach(function(a){var e=a.valor;c.credito+=!e||isNaN(e)?0:parseFloat(e)}),c.cicloPagamento.debitos.forEach(function(a){var e=a.valor;c.debito+=!e||isNaN(e)?0:parseFloat(e)}),c.total=c.credito-c.debito)},c.refresh()}angular.module("primeiraApp").controller("CicloPagamentoCtrl",["$http","$location","msgs","tabs",a])}();
"use strict";!function(){angular.module("primeiraApp").constant("consts",{appName:"Pagamentos App",version:"1.0",owner:"Thiago Luiz",year:"2017",site:"https://github.com/ThiagoLuizNunes",apiUrl:"http://localhost:3003/api",oapiUrl:"http://localhost:3003/oapi",userKey:"_pagamentos_app_user"}).run(["$rootScope","consts",function(o,t){o.consts=t}])}();
"use strict";!function(){angular.module("primeiraApp").config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,a,o){t.state("dashboard",{url:"/dashboard",templateUrl:"dashboard/dashboard.html"}).state("cicloPagamentos",{url:"/cicloPagamentos?page",templateUrl:"cicloPagamentos/tabs.html"})}]).run(["$rootScope","$http","$location","$window","auth",function(t,a,o,e,n){function r(){var t=n.getUser(),r=e.location.href.includes("/auth.html");t||r?t&&!t.isValid&&n.validateToken(t.token,function(n,i){i?(t.isValid=!0,a.defaults.headers.common.Authorization=t.token,r?e.location.href="/":o.path("/dashboard")):e.location.href="/auth.html"}):e.location.href="/auth.html"}r(),t.$on("$locationChangeStart",function(){return r()})}])}();
"use strict";!function(){function t(t){var o=this;o.getSummary=function(){t.get("http://localhost:3003/api/pagamentoSummary").then(function(t){var a=t.data,i=a.credito,r=void 0===i?0:i,e=a.debito,n=void 0===e?0:e;o.credito=r,o.debito=n,o.total=r-n})},o.getSummary()}angular.module("primeiraApp").controller("DashboardCtrl",["$http",t])}();
"use strict";!function(){angular.module("primeiraApp").component("authField",{bindings:{id:"@",label:"@",type:"@",grid:"@",icon:"@",model:"=",placeholder:"@",hide:"<"},controller:function(){var n=this;this.$onInit=function(){n.iconClasses="glyphicon glyphicon-"+n.icon+" form-control-feedback"}},template:'\n    <div class="form-group has-feedback">\n      <input ng-model="$ctrl.model" id="{{ $ctrl.id }}" class="form-control"\n        type="{{ $ctrl.type }}" placeholder="{{ $ctrl.placeholder }}"\n        ng-hide="$ctrl.hide" />\n      <span class="{{ $ctrl.iconClasses }}"></span>\n    </div>\n    '})}();
"use strict";!function(){angular.module("primeiraApp").component("contentHeader",{bindings:{name:"@",small:"@"},template:'\n    <section class="content-header">\n    <h1>{{ $ctrl.name }} <small>{{ $ctrl.small }}</small></h1>\n    </section>\n    '})}();
"use strict";!function(){angular.module("primeiraApp").component("field",{bindings:{id:"@",label:"@",grid:"@",placeholder:"@",type:"@",model:"=",readonly:"<"},controller:["gridSystem",function(l){var r=this;this.$onInit=function(){return r.gridClasses=l.toCssClasses(r.grid)}}],template:'\n    <div class="{{ $ctrl.gridClasses }}">\n      <div class="form-group">\n        <label for="{{ $ctrl.id }}">{{ $ctrl.label }}</label>\n        <input id="{{ $ctrl.id }}" class="form-control" placeholder="{{ $ctrl.placeholder }}"\n          type="{{ $ctrl.type }}" ng-model="$ctrl.model" ng-readonly="$ctrl.readonly"/>\n      </div>\n    </div>\n    '})}();
"use strict";!function(){angular.module("primeiraApp").component("paginator",{bindings:{url:"@",pages:"@"},controller:["$location",function(n){this.$onInit=function(){var r=parseInt(this.pages)||1;this.pagesArray=Array(r).fill(0).map(function(n,r){return r+1}),this.current=parseInt(n.search().page)||1,this.needPagination=this.pages>1,this.hasPrev=this.current>1,this.hasNext=this.current<this.pages,this.isCurrent=function(n){return this.current==n}}}],template:'\n    <ul ng-if="$ctrl.needPagination" class="pagination pagination-sm no-margin pull-right">\n      <li ng-if="$ctrl.hasPrev">\n        <a href="{{ $ctrl.url }}?page={{ $ctrl.current - 1 }}">Anterior</a>\n      </li>\n\n      <li ng-class="{active: $ctrl.isCurrent(index)}" ng-repeat="index in $ctrl.pagesArray">\n        <a href="{{ $ctrl.url }}?page={{ index }}">{{ index }}</a>\n      </li>\n\n      <li ng-if="$ctrl.hasNext">\n        <a href="{{ $ctrl.url }}?page={{ $ctrl.current + 1 }}">Proximo</a>\n      </li>\n    </ul>\n    '})}();
"use strict";!function(){angular.module("primeiraApp").component("valueBox",{bindings:{grid:"@",colorClass:"@",value:"@",text:"@",iconClass:"@"},controller:["gridSystem",function(s){var n=this;this.$onInit=function(){return n.gridClasses=s.toCssClasses(n.grid)}}],template:'\n    <div class="{{ $ctrl.gridClasses }}">\n      <div class="small-box {{ $ctrl.colorClass }}">\n        <div class="inner">\n          <h3>{{ $ctrl.value }}</h3>\n          <p>{{ $ctrl.text }}</p>\n        </div>\n        <div class="icon">\n          <i class="{{ $ctrl.iconClass }}"></i>\n        </div>\n      </div>\n    </div>\n    '})}();
"use strict";!function(){function t(t,o){function n(){return r||(r=JSON.parse(localStorage.getItem(o.userKey))),r}function e(t,o){l("signup",t,o)}function a(t,o){l("login",t,o)}function l(n,e,a){t.post(o.oapiUrl+"/"+n,e).then(function(n){localStorage.setItem(o.userKey,JSON.stringify(n.data)),t.defaults.headers.common.Authorization=n.data.token,a&&a(null,n.data)}).catch(function(t){console.log("Deu ERRO em SUBMIT"),console.log(t),a&&a(t.data.errors,null)})}function u(n){r=null,localStorage.removeItem(o.userKey),t.defaults.headers.common.Authorization="",n&&n(null)}function i(e,a){e?t.post(o.oapiUrl+"/validateToken",{token:e}).then(function(o){o.data.valid?t.defaults.headers.common.Authorization=n().token:u(),a&&a(null,o.data.valid)}).catch(function(t){a&&a(t.data.errors)}):a&&a("Token inválido.")}var r=null;return{signup:e,login:a,logout:u,getUser:n,validateToken:i}}angular.module("primeiraApp").factory("auth",["$http","consts",t])}();
"use strict";!function(){angular.module("primeiraApp").factory("gridSystem",[function(){function r(r){var s=r?r.split(" "):[],t="";return s[0]&&(t+="col-xs-"+s[0]),s[1]&&(t+=" col-sm-"+s[1]),s[2]&&(t+=" col-md-"+s[2]),s[3]&&(t+=" col-lg-"+s[3]),t}return{toCssClasses:r}}])}();
"use strict";!function(){function r(r,e,o){function n(n){return 403===n.status&&(localStorage.removeItem(o.userKey),e.location.href="/"),r.reject(n)}return{responseError:n}}angular.module("primeiraApp").factory("handleResponseError",["$q","$window","consts",r])}();
"use strict";!function(){function r(r){function n(n,c,o){n instanceof Array?n.forEach(function(n){return r[o](n,c)}):r[o](n,c)}function c(r){n(r,"Sucesso","success")}function o(r){n(r,"Erro","error")}return{addSuccess:c,addError:o}}angular.module("primeiraApp").factory("msgs",["toastr",r])}();
"use strict";!function(){function t(){function t(t,a){var e=a.tabList,i=void 0!==e&&e,o=a.tabCreate,r=void 0!==o&&o,b=a.tabUpdate,n=void 0!==b&&b,d=a.tabDelete,u=void 0!==d&&d;t.tabList=i,t.tabCreate=r,t.tabUpdate=n,t.tabDelete=u}return{show:t}}angular.module("primeiraApp").factory("tabs",[t])}();